/*
 * Minimized 32-bit register version (189 Bytes)
 *
 * For the verbose version, see main_verbose.c
 * */

d[999],*p=d,c=1,o,n,*b,a;main(j,i){while(c&&(c=((char*)1[b=i])[o++])){a=c&2;b=c&1;n?n-=c&64?1-a:0:c&16?!b?p-=1-a:a?*p?c=main(o,i)|1:n++:*p?o=j:(c=0):b?*p-=1-a:!a?*p=getchar():putchar(*p);}}


/*
 * Minimized 8-bit register version (192 Bytes)
 *
 * For the verbose version, see main_verbose.c
 * */

//char d[999],*p=d,c=1,*t;o,n,*b,a;main(j,i){while(c&&(c=(t=1[b=i])[o++])){a=c&2;b=c&1;n?n-=c&64?1-a:0:c&16?!b?p-=1-a:a?*p?c=main(o,i)|1:n++:*p?o=j:(c=0):b?*p-=1-a:!a?*p=getchar():putchar(*p);}}